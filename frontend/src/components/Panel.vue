<script setup lang="ts">
  import moment from 'moment';
  import { settings } from '../settings';

  if (!settings.date) {
    const currentDate = moment(new Date()).format('YYYY-MM-DDTHH:mm');
    settings.date = currentDate;
  }
</script>

<template>
  <div class="panel">
    <div class="amount-container input-container">
      <label for="amount">Amount</label>
      <input
        id="amount"
        v-model="settings.amount"
        type="number"
        name="amount"
        placeholder="10 / -3"
        :class="{ warning: !settings.amount }"
      />
      <div class="keep-container">
        <input
          id="keepAmount"
          v-model="settings.keepAmount"
          type="checkbox"
          name="keepAmount"
        />
        <label for="keepAmount">Keep</label>
      </div>
    </div>
    <div class="date-container input-container">
      <label for="date">Date</label>
      <div class="date-inner-container">
        <input
          id="date"
          v-model="settings.date"
          type="datetime-local"
          name="date"
          placeholder="Date"
          class="date"
          :class="{ warning: !settings.date }"
        />
      </div>
      <div class="keep-container">
        <input
          id="keepDate"
          v-model="settings.keepDate"
          type="checkbox"
          name="keepDate"
        />
        <label for="keepDate">Keep</label>
      </div>
    </div>
    <div class="owner-container input-container">
      <label for="owner">Owner</label>
      <input
        id="owner"
        v-model="settings.owner"
        type="text"
        name="owner"
        maxlength="100"
        placeholder="Person (optional)"
      />
      <div class="keep-container">
        <input
          id="keepOwner"
          v-model="settings.keepOwner"
          type="checkbox"
          name="keepOwner"
        />
        <label for="keepOwner">Keep</label>
      </div>
    </div>
    <div class="reason-container input-container">
      <label for="reason">Reason</label>
      <input
        id="reason"
        v-model="settings.reason"
        type="text"
        name="reason"
        maxlength="1000"
        placeholder="Occasion"
        :class="{ warning: !settings.reason }"
      />
      <div class="keep-container">
        <input
          id="keepReason"
          v-model="settings.keepReason"
          type="checkbox"
          name="keepReason"
        />
        <label for="keepReason">Keep</label>
      </div>
    </div>
  </div>
</template>

<style scoped lang="scss">
  .panel {
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    width: calc(100% - 1rem);
    height: calc(10vh - 1rem);
    height: calc((10 * (100vh - var(--vh-offset, 0px)) / 100) - 1rem);
    padding: 0.5rem;
    margin: 0;
    border: none;

    .icon {
      color: #000000;
      font-size: 0.85rem;
      margin: 0;
      padding: 0;
      border: none;
      margin-right: -0.2rem;

      &.button-icon {
        font-size: 1.125rem;
      }
    }

    .input-container {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 25%;
      padding: 0.25rem;
      font-size: 1rem;
      line-height: 1.25rem;

      label {
        margin-left: 0.5vh;
        margin-left: calc((0.5 * (100vh - var(--vh-offset, 0px)) / 100));
        font-weight: bold;
      }

      > * {
        margin-top: 1vh;
        margin-top: calc((1 * (100vh - var(--vh-offset, 0px)) / 100));
      }

      > *:first-child {
        margin-top: 0;
      }

      input {
        font-family: Arial, Helvetica, sans-serif;
        height: 0.75rem;
        font-size: 1rem;
        line-height: 1rem;
        width: 90%;
        padding: 0.25rem;
        margin: 0.25vh;
        margin: calc((0.25 * (100vh - var(--vh-offset, 0px)) / 100));
        margin-top: 1vh;
        margin-top: calc((1 * (100vh - var(--vh-offset, 0px)) / 100));
        border: solid 0.2vh rgb(179, 179, 179);
        border: solid calc((0.2 * (100vh - var(--vh-offset, 0px)) / 100))
          rgb(179, 179, 179);
        border-radius: 2vh;
        border-radius: calc((2 * (100vh - var(--vh-offset, 0px)) / 100));
        box-shadow: 0 0.125rem 0.125rem rgba(0, 0, 0, 0.3);

        &.warning {
          border: solid 0.3vh rgb(194, 0, 0);
          border: solid calc((0.3 * (100vh - var(--vh-offset, 0px)) / 100))
            rgb(194, 0, 0);
        }

        &.date {
          margin: 0;
          margin-top: 0;
        }
      }

      .date-inner-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        width: 100%;
        margin: 0.25vh;
        margin: calc((0.25 * (100vh - var(--vh-offset, 0px)) / 100));
        margin-top: 1vh;
        margin-top: calc((1 * (100vh - var(--vh-offset, 0px)) / 100));
        padding: 0;
        border: none;
      }

      .keep-container {
        display: flex;
        flex-direction: row;

        label {
          font-size: 2.5vh;
          font-size: calc((2.5 * (100vh - var(--vh-offset, 0px)) / 100));
          line-height: 2.5vh;
          line-height: calc((2.5 * (100vh - var(--vh-offset, 0px)) / 100));
          margin-top: 0.5vh;
          margin-top: calc((0.5 * (100vh - var(--vh-offset, 0px)) / 100));
          font-weight: normal;
        }

        input {
          height: 2.5vh;
          height: calc((2.5 * (100vh - var(--vh-offset, 0px)) / 100));
          width: 2.5vh;
          width: calc((2.5 * (100vh - var(--vh-offset, 0px)) / 100));
          padding: 0.5vh;
          padding: calc((0.5 * (100vh - var(--vh-offset, 0px)) / 100));
          margin: 0.5vh;
          margin: calc((0.5 * (100vh - var(--vh-offset, 0px)) / 100));
          border: solid 0.2vh rgb(179, 179, 179);
          border: solid calc((0.2 * (100vh - var(--vh-offset, 0px)) / 100))
            rgb(179, 179, 179);
          box-shadow: 0 0.125rem 0.125rem rgba(0, 0, 0, 0.3);
        }
      }
    }
  }

  @media (min-aspect-ratio: 3/1) {
    .panel {
      height: calc(15vh - 1rem);
      height: calc((15 * (100vh - var(--vh-offset, 0px)) / 100) - 1rem);
    }
  }

  @media (max-aspect-ratio: 1/1) {
    .panel {
      padding: 0.125rem;
      width: calc(100% - 0.25rem);
      height: calc(12vw - 1rem);

      .input-container {
        label {
          margin-left: 0.5vw;
        }

        > * {
          margin-top: 0.5vw;
        }

        > *:first-child {
          margin-top: 0;
        }

        input {
          font-family: Arial, Helvetica, sans-serif;
          margin: 0.25vw;
          margin-top: 1vw;
          border: solid 0.2vw rgb(179, 179, 179);
          border-radius: 2vw;

          &.warning {
            border: solid 0.3vw rgb(194, 0, 0);
          }

          &.date {
            margin: 0;
            margin-top: 0;
          }
        }

        .date-inner-container {
          margin: 0.25vw;
          margin-top: 1vw;
        }

        .keep-container {
          label {
            font-size: 2.5vw;
            line-height: 2.5vw;
            margin-top: 0.5vw;
          }

          input {
            height: 2.5vw;
            width: 2.5vw;
            padding: 0.5vw;
            margin: 0.5vw;
            border: solid 0.2vw rgb(179, 179, 179);
          }
        }
      }
    }
  }

  @media (max-aspect-ratio: 9/16) {
    .panel {
      height: calc(25vw - 1rem);
    }
  }
</style>
